/*! angular-pinch-zoom - v0.2.0 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function n(n,t,e){function i(n){f=1,w=0,X=0,l()}function o(n){I=n.originalEvent.touches[0].clientX,D=n.originalEvent.touches[0].clientY,Y=w,d=X,T=0,M=0}function c(n){""===h&&(1===n.originalEvent.touches.length&&f>1?h="swipe":2===n.originalEvent.touches.length&&(h="pinch",m=f,v=a(n),b=n.originalEvent.touches[0].clientX-parseInt((n.originalEvent.touches[0].clientX-n.originalEvent.touches[1].clientX)/2,10)-t[0].offsetLeft-Y,k=n.originalEvent.touches[0].clientY-parseInt((n.originalEvent.touches[0].clientY-n.originalEvent.touches[1].clientY)/2,10)-t[0].offsetTop-d)),"swipe"===h?(n.preventDefault(),T=n.originalEvent.touches[0].clientX-I,M=n.originalEvent.touches[0].clientY-D,w=Y+T,X=d+M,l()):"pinch"===h&&(n.preventDefault(),g=a(n),E=g/v,f=E*m,w=b*(1-E)+Y+T,X=k*(1-E)+d+M,l())}function r(n){""===h||n.originalEvent.touches.length>0||(f=f?f:0,1>f?(f=1,w=0,X=0):f>p?(f=p,E=f/m,w=b*(1-E)+Y+T,X=k*(1-E)+d+M):(w>0?w=0:s*(1-f)>w&&(w=s*(1-f)),X>0?X=0:u*(1-f)>X&&(X=u*(1-f))),l(.1),h="")}function a(n){var t=Math.sqrt(Math.pow(n.originalEvent.touches[0].clientX-n.originalEvent.touches[1].clientX,2)+Math.pow(n.originalEvent.touches[0].clientY-n.originalEvent.touches[1].clientY,2));return parseInt(t,10)}function l(n){var e=n?"all cubic-bezier(0,0,.5,1) "+n+"s":"",i=[f,0,0,f,w,X],o="matrix("+i.join(",")+")";t.css({"-webkit-transition":e,transition:e,"-webkit-transform":o+" translate3d(0,0,0)",transform:o})}var s,u,h="",g=0,v=0,f=1,E=1,m=1,p=parseInt(e.maxScale,10);(isNaN(p)||1>=p)&&(p=3);var w=0,X=0,Y=0,d=0,b=0,k=0,I=0,D=0,T=0,M=0,S=new Image;S.onload=function(){s=t[0].clientWidth,u=t[0].clientHeight,t.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),t.on("touchstart",o),t.on("touchmove",c),t.on("touchend",r);var n,e=300,a=!1;t.on("click",function(t){if(a){a=!1;var o=(new Date).getTime();e>o-n&&i(t)}else n=(new Date).getTime(),a=!0,setTimeout(function(){a=!1},e)})},e.ngSrc?S.src=e.ngSrc:S.src=e.src}var t={restrict:"A",scope:!1,link:n};return t});