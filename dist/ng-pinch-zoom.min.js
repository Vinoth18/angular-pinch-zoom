/*! angular-pinch-zoom - v0.2.0 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function n(n,t,e){function i(n){I=n.originalEvent.touches[0].clientX,k=n.originalEvent.touches[0].clientY,X=m,Y=w,M=0,S=0}function o(n){""===u&&(1===n.originalEvent.touches.length&&v>1?u="swipe":2===n.originalEvent.touches.length&&(u="pinch",E=v,g=r(n),d=n.originalEvent.touches[0].clientX-parseInt((n.originalEvent.touches[0].clientX-n.originalEvent.touches[1].clientX)/2,10)-t[0].offsetLeft-X,b=n.originalEvent.touches[0].clientY-parseInt((n.originalEvent.touches[0].clientY-n.originalEvent.touches[1].clientY)/2,10)-t[0].offsetTop-Y)),"swipe"===u?(n.preventDefault(),M=n.originalEvent.touches[0].clientX-I,S=n.originalEvent.touches[0].clientY-k,m=X+M,w=Y+S,a()):"pinch"===u&&(n.preventDefault(),h=r(n),f=h/g,v=f*E,m=d*(1-f)+X+M,w=b*(1-f)+Y+S,a())}function c(n){""===u||n.originalEvent.touches.length>0||(v=v?v:0,1>v?(v=1,m=0,w=0):v>p?(v=p,f=v/E,m=d*(1-f)+X+M,w=b*(1-f)+Y+S):(m>0?m=0:l*(1-v)>m&&(m=l*(1-v)),w>0?w=0:s*(1-v)>w&&(w=s*(1-v))),a(.1),u="")}function r(n){var t=Math.sqrt(Math.pow(n.originalEvent.touches[0].clientX-n.originalEvent.touches[1].clientX,2)+Math.pow(n.originalEvent.touches[0].clientY-n.originalEvent.touches[1].clientY,2));return parseInt(t,10)}function a(n){var e=n?"all cubic-bezier(0,0,.5,1) "+n+"s":"",i=[v,0,0,v,m,w],o="matrix("+i.join(",")+")";t.css({"-webkit-transition":e,transition:e,"-webkit-transform":o+" translate3d(0,0,0)",transform:o})}var l,s,u="",h=0,g=0,v=1,f=1,E=1,p=parseInt(e.maxScale,10);(isNaN(p)||1>=p)&&(p=3);var m=0,w=0,X=0,Y=0,d=0,b=0,I=0,k=0,M=0,S=0,x=new Image;x.onload=function(){l=t[0].clientWidth,s=t[0].clientHeight,t.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),t.on("touchstart",i),t.on("touchmove",o),t.on("touchend",c)},e.ngSrc?x.src=e.ngSrc:x.src=e.src}var t={restrict:"A",scope:!1,link:n};return t});